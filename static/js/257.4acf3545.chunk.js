"use strict";(self.webpackChunk_kne_components_system_layout=self.webpackChunk_kne_components_system_layout||[]).push([[257,638],{39638(e,t,n){n.r(t),n.d(t,{Global:()=>C,GlobalSetting:()=>P,GlobalValue:()=>m,Preset:()=>y,PresetProvider:()=>d,Provider:()=>s,SelectProvider:()=>f,context:()=>u,createContext:()=>o,default:()=>u,presetContext:()=>i,selectorContext:()=>b,useContext:()=>c,useGlobalContext:()=>a,useGlobalValue:()=>h,usePreset:()=>v,useSelectorContext:()=>x});var r=n(94922),l=n.n(r);const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,r.createContext)(e),{Provider:n,Consumer:l}=t;return{context:t,Provider:n,Consumer:l,useContext:()=>(0,r.useContext)(t)}},u=o({}),{Provider:s,useContext:c}=u,a=c,i=o({}),{Provider:d,useContext:v}=i,b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{context:t,Provider:n,useContext:u}=o(e);return{context:t,Provider:e=>{let{value:t,children:o}=e;const u=(0,r.useRef)();let s=u.current;if(!s){const e=new Set;s={value:t,subscribe:t=>(e.add(t),()=>e.delete(t)),notify:()=>e.forEach(e=>e())},u.current=s}return(0,r.useEffect)(()=>{Object.is(s.value,t)||(s.value=t,s.notify())}),l().createElement(n,{value:s},o)},useContext:e=>{const t=u();return(0,r.useSyncExternalStore)(t.subscribe||(()=>{}),()=>e(t.value))}}}({}),{Provider:f,useContext:x}=b,C=e=>{let{preset:t,children:n,initValue:o}=e;const[u,c]=(0,r.useState)(Object.assign({},o)),a=(0,r.useCallback)((e,t)=>{c(n=>Object.assign({},n,{[e]:"function"===typeof t?t(n[e]):t}))},[]);return l().createElement(s,{value:{global:u,setGlobal:c,setGlobalValue:a}},l().createElement(d,{value:t},l().createElement(f,{value:u},n)))},P=e=>{let{loader:t,needReady:n=!0,children:l}=e;const[o,u]=(0,r.useState)(!1),{global:s,setGlobal:a}=c(),i=(0,r.useRef)(null),d=(0,r.useRef)(t);return(0,r.useEffect)(()=>{Promise.resolve(d.current).then(e=>{a(t=>{const n=Object.assign({},t,e);return i.current=n,n})})},[]),(0,r.useEffect)(()=>{s===i.current&&u(!0)},[s]),n&&!o?null:l},h=e=>x(t=>null==t?void 0:t[e]),m=e=>{let{globalKey:t,children:n}=e;return n({value:h(t)})},y=e=>{let{children:t}=e;return t(v())}}}]);
//# sourceMappingURL=257.4acf3545.chunk.js.map